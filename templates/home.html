{% extends 'base.html' %}

{% block title %}Home{% endblock title %}

{% block search %}
<form class="navbar-form navbar-left">
    <div class="input-group">
        <input type="text" class="form-control" placeholder="Search" name="search">
        <div class="input-group-btn">
            <button class="btn btn-default" type="submit">
                <i class="glyphicon glyphicon-search"></i>
            </button>
        </div>
    </div>
</form>
{% endblock search %}

{% block content %}
<div class="home_background"></div>
<div class="home">
        <h2 style="font-size:12vw">Built With X </h2>
        <p style="font-size:3.5vw">A platform to submit your projects.</p>
</div>



<div>

<div id="filter">
        <form action="" class="search_form">
        <input type="text" style="width:50%" class="form-control" placeholder="Search" id="search" name="search">
        <select name="framework" id="framework" style="width:30%" class="form-control" id="framework">
            <option value="all" selected>All</option>
            {% for lang in frameworks %}
                <option value="{{lang.language}}">{{lang.language}}</option>
            {% endfor %}
        </select>
        <button class="btn btn-primary" style="margin-top:10px">Filter</button>
        </form>
</div>    
<div class="projects">
<div style="display:flex; flex-wrap:wrap; margin: 20px; justify-content:space-around;">
    {% for project in object_list %}
        <div class="id3" style="margin: 10px;">
            <a href="{{ project.url }} " target="_blank">
                <img src="{{ project.website_image.url }}" style="height:300px;width:100%;max-width:450px;" alt="error_img">
            </a>
            <div class="id2">
                <a href="{{ project.url }}" target="_blank"><h2> {{ project.project_name }}</h2></a>
                <p>{{ project.description }}</p>
                <div class="id4">
                    <a href="{{ project.url }}" target="_blank" class="id5"><i class="glyphicon glyphicon-link"></i></a>
                    <span style="display: list-item;">{% for lang in project.build_with.all %}{{ lang }}{% endfor %} </br><i>@{{ project.user }}</i> </span>
                    
                </div>
            </div>
        </div>
    {% endfor %}
    </div>
</div>

</div>
<script>
    //this code will make the page scroll to filter part if a form is submitted
    const queryString = window.location.search
    const urlParams = new URLSearchParams(queryString);
    const search = urlParams.get('search')
    const framework = urlParams.get('framework')
    if(search || framework){
        document.getElementById('search').value = search
        document.getElementById('framework').value = framework
        document.getElementById('filter').scrollIntoView();
    }
</script>
{% endblock content %}